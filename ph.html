<script>
    var webLink = "https:\/\/partners.uber.com";
    var iosLink = "uberpartner:\/\/tabs\/earnings?view=promos-hub";
    var androidLink = "uberpartner:\/\/tabs\/earnings?view=promos-hub";
    var carbonIosLink = "uberdriver:\/\/planning_hub?type=promo_calendar";
    var carbonAndroidLink = "uberdriver:\/\/planning_hub?type=promo_calendar";

    function tryWebkitOnly(link) {
        document.location = link;
    }

    function tryIframeOnly(link) {
        var iframe = document.createElement("iframe");
        iframe.style.border = "none";
        iframe.style.width = "1px";
        iframe.style.height = "1px";
        iframe.src = link;
        document.body.appendChild(iframe);
    }

    function tryIframeWithFallback(link, fallback) {
        var iframe = document.createElement("iframe");
        iframe.style.border = "none";
        iframe.style.width = "1px";
        iframe.style.height = "1px";
        iframe.onload = function () {
            document.location = fallback;
        };
        iframe.src = link;
        document.body.appendChild(iframe);
    }

    function tryWindowOnly(link) {
        window.location = link;
    }

    window.onload = function() {
        if (navigator.userAgent.match(/(android)/i)) {
            tryWindowOnly(carbonAndroidLink);

            setTimeout(function() {
                tryWindowOnly(androidLink);
            }, 500);

            setTimeout(function() {
                tryWindowOnly(webLink);
            }, 1000);
        } else if (navigator.userAgent.match(/(iPod|iPhone|iPad)/i)) {
            tryWindowOnly(carbonIosLink);

            setTimeout(function() {
                tryWindowOnly(iosLink);
            }, 500);

            setTimeout(function() {
                tryWindowOnly(webLink);
            }, 1000);
        } else {
            tryWindowOnly(webLink);
        }
    }
</script>

